<mat-table
    (cdkDropListDropped)="tableDrop($event)"
    (matSortChange)="sortData($event)"
    [dataSource]="dataSource"
    cdkDropList
    cdkDropListOrientation="horizontal" class="mat-elevation-z8"
    id="visa-cost-item"
    matSort>

    <ng-container *ngFor="let column of itemsColumns; let i = index"
                  [matColumnDef]="column.ItemCostKey">
        <ng-container *ngIf="column.Visible">
            <mat-header-cell
                *matHeaderCellDef
                cdkDrag
                cdkDragLockAxis="x"
                mat-sort-header={{column.ItemCostKey}}>
                {{ column.Name }}
                <button class="grid-view-header-menu"
                        mat-icon-button [matMenuTriggerFor]="menu">
                    <mat-icon>menu</mat-icon>
                </button>
                <mat-menu #menu>
                    <button mat-menu-item>Group By This Field</button>
                    <button mat-menu-item>Ungroup</button>
                </mat-menu>
            </mat-header-cell>
            <mat-cell *matCellDef="let element">
                <app-edit-numeric (outValue)="changeTotalSumPlan($event, element)"
                                  *ngIf="column.ItemCostKey === 'TotalSumPlan';
                        else elseBlock"
                                  [value]="element[column.ItemCostKey]"></app-edit-numeric>
                <ng-template #elseBlock>{{ element[column.ItemCostKey]}}</ng-template>
            </mat-cell>
        </ng-container>
    </ng-container>

    <mat-header-row #tableHeaderRow
                    *matHeaderRowDef="displayColumns"
                    class="tableHeaderRow"></mat-header-row>
    <mat-row *matRowDef="let row; columns: displayColumns;"></mat-row>
</mat-table>

